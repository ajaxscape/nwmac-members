{% extends "layouts/govuk.njk" %}

{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle="Select achievements" %}
{% set backLink="/details/check-details" if edit else "/details/caa-registration" %}

{% block content %}
<form method="post" novalidate="novalidate" action="">
    {% call govukFieldset({
        legend: {
            text: pageTitle,
            classes: "govuk-fieldset__legend--l",
            isPageHeading: true
        }
    }) %}

        {% for category in achievementsByCategory %}
            {{ govukCheckboxes({
                name: "achievements",
                fieldset: {
                    legend: {
                        text: category.title,
                        classes: "govuk-fieldset__legend--m"
                    }
                },
                items: category | mapAchievementsToItems
            }) }}
        {% endfor %}
    {% endcall %}

    {{ govukButton({
        text: ("Save and return" if edit else "Save and continue")
    }) }}
</form>
{% endblock %}