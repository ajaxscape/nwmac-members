{% extends "layouts/form-layout.njk" %}

{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}

{% set pageTitle="Enter the fees for " + nextRenewalYear %}
{% set backLink="/details/check-details" if edit else "/details/name" %}

{% block formContent %}
    {% call govukFieldset({
        legend: {
            text: pageTitle,
            classes: "govuk-fieldset__legend--l",
            isPageHeading: true
        }
    }) %}

        {% set type = '' %}
        {% for fee in fees %}
            {% if type !== fee.type %}
                {% set type = fee.type %}
                <h2 class="govuk-heading-m">{{ type }}</h2>
            {% endif %}
            {% set prevValue = fee.prevValue %}
            {{ govukInput({
                id: fee.name,
                name: fee.name,
                label: {
                    text: fee.title
                },
                prefix: {
                    text: "£"
                },
                value: fee.value,
                hint: { text: "Was £" + prevValue + " in " + currentRenewalYear },
                errorMessage: mapToError(errors, fee.name),
                classes: "govuk-input--width-5",
                spellcheck: false
            }) }}
        {% endfor %}

        {% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}

        {{ govukCheckboxes({
            name: "available",
            fieldset: {
                legend: {
                    text: "Make subscriptions available for " + nextRenewalYear,
                    classes: "govuk-fieldset__legend--m"
                }
            },
            items: [
                {
                    value: "available",
                    text: "Yes",
                    checked: available
                }
            ]
        }) }}
    {% endcall %}
{% endblock %}